# test-datasets: `denovotranscript`

This branch contains test data to be used for automated testing with the [nf-core/denovotranscript](https://github.com/nf-core/denovotranscript) pipeline.

## Contents of this repository

`samplesheet/samplesheet.csv`: Samplesheet for reads for minimal test dataset

`samplesheet/samplesheet_full.csv`: Samplesheet for reads for full test dataset

`data/minimal/*.fastq.gz`: Subsampled fastq files of RNA-seq reads containing 2 000 reads each

`data/minimal/*.fa`: Assembled transcriptome generated from the minimal test dataset

`data/full/*.fastq.gz`: Subsampled fastq files of RNA-seq reads containing 80 000 reads each

`data/full/*.fa`: Assembled transcriptome generated from the full test dataset

## Test dataset source

Paired-end RNA-seq reads are from whole *Panulirus ornatus* ([PRJNA664650](https://www.ncbi.nlm.nih.gov/bioproject/PRJNA664650)). See associated reference:

> Hyde, C. J., Fitzgibbon, Q. P., Elizur, A., Smith, G. G., & Ventura, T. (2019). Transcriptional profiling of spiny lobster metamorphosis reveals three new additions to the nuclear receptor superfamily. BMC Genomics, 20(1). https://doi.org/10.1186/s12864-019-5925-5

## Test dataset generation

The following samples were chosen for the test dataset:

| Sample | Phase    | Stage          | Days post-molt | SRX accession | SRR accession |
|--------|----------|----------------|----------------|---------------|---------------|
| H4     | Puerulus | Clear post-molt| 1              | SRX9161265    | SRR12681119   |
| H5     | Puerulus | Clear post-molt| 1              | SRX9161266    | SRR12681118   |
| H6     | Puerulus | Clear post-molt| 1              | SRX9161267    | SRR12681117   |
| K1     | Juvenile | Post-molt      | 0              | SRX9161275    | SRR12681109   |
| K2     | Juvenile | Post-molt      | 0              | SRX9161276    | SRR12681108   |
| K3     | Juvenile | Post-molt      | 0              | SRX9161277    | SRR12681107   |

For the minimal test dataset, 2 000 reads were sampled from each fastq file using BBMap's (v39.01) `reformat.sh`. For the full dataset 80 000 reads were sampled from each fastq file.

Example of command used for subsampling reads:

```bash
reformat.sh in1=reads_1.fastq.gz in2=reads_2.fastq.gz out1=reads_subset_1.fastq.gz out2= reads_subset_2.fastq.gz sample=2000
```

Assembled transcriptomes generated from the test datasets are also provided, as 
they will be useful for testing the pipeline in "quant_only" mode. These 
transcriptomes were generated by using the nf-core/denovotranscript pipeline
(under development). It uses Trinity (v2.13.2) and rnaSPAdes (v3.15.5). The 
pipeline was run with default params, with the addition of the following:

```
--extra_fastp_args='--trim_front1 15 --trim_front2 15 --trim_tail1 5 --trim_tail2 5'
```

Code for the pipeline used can be found at:
https://github.com/avani-bhojwani/TransFuse/tree/dev with the commit hash:
7338a6256004d41daf49f6720781a4c4dcc463bb